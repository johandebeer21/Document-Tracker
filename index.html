<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Application Tracker</title>
<style>
  body { font-family: Arial, sans-serif; background: #f9fafb; padding: 20px; }
  .card { background: white; padding: 16px; margin-bottom: 12px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); opacity: 0; transform: translateY(20px); animation: fadeInUp 0.5s forwards; }
  .status { padding: 4px 10px; border-radius: 12px; font-weight: bold; }
  .Done { background: #86efac; color: #166534; }
  .["Not started"] { background: #fbbf24; color: #92400e; }
  .Pending { background: #fbbf24; color: #92400e; }
  @keyframes fadeInUp {
    to { opacity: 1; transform: translateY(0); }
  }
</style>
</head>
<body>

<h1>Application Tracker</h1>

<input type="text" id="search" placeholder="Search task..." style="padding:8px; width:100%; max-width:400px; margin-bottom:20px;"/>

<div id="app-list">Loading data...</div>

<script>
  const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQtqULGR-HUX-Lp7ryJrR_KfuG_NeubNjYe3CvCAvDngUHsUf4VXwqZOyCDSScKadslN3JTTBp9ST3Q/pub?output=csv';

  function parseCSV(text) {
    const lines = text.trim().split('\n');
    const headers = lines.shift().split(',').map(h => h.trim());
    return lines.map(line => {
      const data = line.split(',').map(d => d.trim());
      const obj = {};
      headers.forEach((h, i) => obj[h] = data[i] || '');
      return obj;
    });
  }

  const appList = document.getElementById('app-list');
  const searchInput = document.getElementById('search');
  let applications = [];

  function renderApps(list) {
    if (!list.length) {
      appList.innerHTML = '<p>No applications found.</p>';
      return;
    }
    appList.innerHTML = '';
    list.forEach((app, i) => {
      const card = document.createElement('div');
      card.className = 'card';
      card.style.animationDelay = `${i * 0.1}s`;
      card.innerHTML = `
        <h2>${app['Task']}</h2>
        <p>Status: ${app['Status']}</p>
        <p>Assignee: ${app['Assignee']}</p>
        <p>Due date: ${app['Due date'] || 'N/A'}</p>
        <p>Updated: ${app['Updated at'] || 'N/A'}</p>
      `;
      appList.appendChild(card);
    });
  }

  function fetchData() {
    appList.textContent = 'Loading data...';
    fetch(CSV_URL)
      .then(res => res.ok ? res.text() : Promise.reject('Failed to fetch'))
      .then(text => {
        applications = parseCSV(text);
        renderApps(applications);
      })
      .catch(err => {
        appList.innerHTML = '<p>Failed to load data.</p>';
        console.error(err);
      });
  }

  searchInput.addEventListener('input', () => {
    const term = searchInput.value.toLowerCase();
    const filtered = applications.filter(app => app['Task'].toLowerCase().includes(term));
    renderApps(filtered);
  });

  fetchData();
  setInterval(fetchData, 60000); // refresh every minute
</script>

</body>
</html>


